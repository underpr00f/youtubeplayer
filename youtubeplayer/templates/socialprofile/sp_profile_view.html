{% extends "base.html" %}
{% load i18n %}
{% load socialprofile_tags %}

{% block headtitle %}{% trans "Profile for " %}{{ user.username }}{% endblock %}

{% block header %}
<div class="alert-success">
    <div class="container-fluid pt-3">
        <div class="row">
            <div class="col2 mx-auto">
                <a role="button" class="btn btn-outline-dark btn-block" href="{{ sp_form.returnTo.value|default:'/' }}">{% trans "Назад" %}</a>
            </div>
            <div class="col8 mx-auto text-center">
                <h1>{% trans "Профиль" %}</h1>
            </div>

            <div class="col2 mx-auto">
                {% if request.user.username == user_form.username.value %}
            
                <a role="button" class="btn btn-dark btn-block" href="{% url "sp_profile_edit_page" %}?returnTo={{ sp_form.returnTo.value }}" data-role="button"
                       data-ajax="false">{% trans "Изменить профиль" %}</a>
            
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
    <section title="profile" data-role="content">


        <section title="{% trans 'Picture' %}" class="sp-profile-img">
        	{% if user.social_profile.avatar %}
        		<img src="{{ MEDIA_URL }}{{ user.social_profile.avatar }}" width="100" height = "100">
        	{% elif user.social_profile.image_url %}
        		<img src="{{ user.social_profile.image_url }}"/>
        	{% else %}
        		<img src="{{ sp_form.image_url.value|default:"http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm" }}">
        	{% endif %}
            

            <h2 class="sp-profile-name">{{ user_form.first_name.value|default:"&nbsp;" }} {{ user_form.last_name.value|default:"&nbsp;" }}</h2>
        </section>

        <div class="container">
        <ul>
            <li>{{ user_form.username.label_tag }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            {{ user_form.username.value|default:"&nbsp;" }}</li>

            <li>{{ user_form.email.label_tag }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            {{ user_form.email.value|default:"&nbsp;" }}</li>

            <li>{{ sp_form.gender.label_tag }}
            	&nbsp;{{ sp_form.gender.value|title|default:"&nbsp;" }}
            </li>

            <li>{{ sp_form.url.label_tag }}
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ sp_form.url.value|urlize }}
            </li>

            <li>{{ sp_form.description.label_tag }}&nbsp;{{ sp_form.description.value|default:"&nbsp;" }}</li>
            {% if request.user.username == user_form.username.value %}
                <li>{% trans "Аутентификация:" %}&nbsp;&nbsp;&nbsp;
                    {% for user_social_auth in user.social_auth.all %}
                        {{ user_social_auth.provider|social_provider_name }}{% if not forloop.last %},&nbsp;{% endif %}
                    {% empty %}
                        {% trans "Нет социальной аутентификации." %}
                    {% endfor %}
                </li>
            {% endif %}
        </ul>
        </div>

    </section>
{% endblock %}

